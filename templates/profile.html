{% extends 'base.html' %}




{% load static %}


{% block content %}

<br>
	<div class='container' id='profilecontainer' >
		
		<div class='row'>
			<div class='col-md-4 '>
				<h2>Welcome! {{request.session.name}} </h2>
			</div>
			<br>
			<div class='col-md-8 '>

					{% if message %}
					<script>
			        	setTimeout(function(){
			        		$('.alert-success').slideUp();
			        	},2000);	
			    </script>

  					<div class="alert alert-success alert-dismissible text-center">
   					 <strong >{{message}}</strong> 
   					</div>
					{% endif %}
			</div>
		</div>	
		<hr>
		<div class='row' >
			<div class='col-md-3' id='profilesidebar'>
	<div class="tab">
  <button class="tablinks proflink" onclick="openCity(event, 'profile')" id="defaultOpen">Profile</button>
  <button class="tablinks passlink" onclick="openCity(event, 'password')">Change Password</button>
  <button class="tablinks" onclick="openCity(event, 'subs')">My Subscription</button>
  <button class="tablinks" onclick="openCity(event, 'tuts')">Traning Courses</button>
</div>

				<br>
				
			</div>
			<div class='col-md-9'>
				<div id="profile" class="tabcontent">
  

  <!-- <span style="color: red;">{{ message }}</span> -->
  <div class="text-center">
      
  </div>
  <form class="form-horizontal" action="{% url 'update_name' %}" method='POST'>
  	{% csrf_token %}
    
    <div class="form-group">
      <label class="control-label col-sm-2" for="email">Name:</label>
      <div class="col-sm-10">
        <input type="text" style='width:60%' pattern="[a-zA-Z][a-zA-Z ]+" title='Please avoid numbers in your name' class="form-control" id="name" placeholder="{{request.session.name}}" required name="name">
        

      </div>
    </div>
   	<div class="form-group">
      <label class="control-label col-sm-2" for="email">Email:</label>
      <div class="col-sm-10">
        <input type="email" style='width:60%' disabled class="form-control" id="email" placeholder="{{request.session.username}}"" name="email">


      </div>
    </div>
    <div class="form-group">        
      <div class="col-sm-10">
       <center> <button type="submit" class="btn btn-default" style='background-color: #43bdfe'>Update</button></center>
      </div>
    </div>
  </form>

</div>

<div id="password" class="tabcontent">

   
  <form class="form-horizontal" action="/update_pass" method='POST'>
  	{% csrf_token %}
    <div class="form-group">
    	<label class="control-label col-sm-2" ></label>
      <div class="col-sm-10">
        <input type="password" style='width:60%'  class="form-control" id="oldpass" placeholder="Previous Password" name="oldpass">


      </div>
    </div>
    <div class="form-group">
    	<label class="control-label col-sm-2" ></label>
      <div class="col-sm-10">
          <input type="password" style='width:60%' pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" class="form-control" id="newpass" placeholder="New Password" name="newpass">
        

      </div>
    </div>
   
    
    <div class="form-group">
    	<label class="control-label col-sm-2" ></label>
      <div class="col-sm-10">
          <input type="password" style='width:60%'  class="form-control" id="conpass" placeholder="Confirm Password" name="conpass">
        



      </div>
    </div>

    <div class="form-group">        
      <div class="col-sm-10 ">
        <center><button type="submit" class="btn btn-default" style='background-color: #43bdfe'>Change Password</button></center>
        <br><br>
      </div>
    </div>

  </form>

</div>

<div id="subs" class="tabcontent">
  <h3>My Subscriptions</h3>
  <p>*Feature Coming Soon*</p>
  
</div>
<div id="tuts" class="tabcontent">
  <h3>The Complete Short Sale Process</h3>
  <hr>
    You need to buy a subscription plan to get access
 <!-- <iframe width="100%" height="500px" src="https://www.youtube.com/embed/videoseries?list=PL72HCXLSaVP3hsljOY9WoZtMCYTE1CfMT" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->
</div>

			</div> 
		</div>
	</div>

    
<script>
function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>
    
<script>
var password = document.getElementById("newpass")
  , confirm_password = document.getElementById("conpass");

function validatePassword(){
  if(password.value != confirm_password.value) {
    confirm_password.setCustomValidity("Passwords Don't Match");
  } else {
    confirm_password.setCustomValidity('');
  }
}

password.onchange = validatePassword;
confirm_password.onkeyup = validatePassword;
</script>

{% endblock %}